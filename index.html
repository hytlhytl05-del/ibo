<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Minecraft Servers</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#0c0c0c;color:#fff}
header{text-align:center;padding:20px;background:#000}
header h1{color:#00ff66;margin:0}
.container{max-width:420px;margin:auto;padding:10px}
.card{background:#1b1b1b;border-radius:16px;padding:15px;margin-bottom:15px}
input,select,button{
  width:100%;padding:10px;margin:6px 0;
  border-radius:10px;border:none;font-size:15px
}
button{background:#00aa55;color:#fff;font-weight:bold}
.status{padding:4px 10px;border-radius:20px;font-size:12px}
.online{background:#00aa55}
.offline{background:#aa3333}
.star{font-size:22px;cursor:pointer;color:#444}
.star.active{color:#ffd700}
.small{font-size:13px;color:#bbb}
.ip-box{
  background:#000;padding:8px;border-radius:10px;
  display:flex;justify-content:space-between;align-items:center
}
.copy{background:#00ff66;color:#000;padding:6px 10px;border-radius:8px}
.badge{background:#00ffaa;color:#000;padding:3px 8px;border-radius:8px;font-size:12px}
</style>
</head>

<body>

<header>
<h1>âš” Minecraft Servers</h1>
</header>

<div class="container">

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h3>Login</h3>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- FILTER -->
<div class="card">
<button onclick="toggleOnline()">ðŸŸ¢ Online Only</button>
</div>

<!-- ADD SERVER -->
<div class="card">
<h3>Add Server</h3>
<input id="serverName" placeholder="Server Name">
<input id="serverIP" placeholder="Server IP">
<input id="serverPort" placeholder="Port (25565)">
<input id="discord" placeholder="Discord Link (optional)">
<select id="serverStatus">
<option value="online">Online</option>
<option value="offline">Offline</option>
</select>
<button onclick="addServer()">Add Server</button>
</div>

<div id="servers"></div>
</div>

<script>
// ===== ADMIN (Ù…Ø­Ø·ÙˆØ· Ø¹Ù†Ùƒ) =====
const ADMIN_NAME = "ibo";
const ADMIN_PASSWORD = "ibo2011m.985";

// ===== DATA =====
let user = null;
let uid = localStorage.getItem("uid") || Date.now().toString();
localStorage.setItem("uid", uid);

let servers = JSON.parse(localStorage.getItem("servers") || "[]");
let showOnlineOnly = false;

function save(){
  localStorage.setItem("servers", JSON.stringify(servers));
}

// ===== LOGIN =====
function login(){
  const u = username.value.trim().toLowerCase();
  const p = password.value;

  if(!u || !p){
    alert("Fill all fields");
    return;
  }

  if(u === ADMIN_NAME){
    if(p !== ADMIN_PASSWORD){
      alert("Wrong password");
      return;
    }
    localStorage.setItem("isAdmin","true");
  } else {
    localStorage.removeItem("isAdmin");
  }

  user = u;
  localStorage.setItem("user", u);
  loginBox.style.display="none";
  render();
}

// ===== ADD SERVER =====
function addServer(){
  if(!user){ alert("Login first"); return; }

  servers.push({
    name: serverName.value,
    ip: serverIP.value,
    port: serverPort.value || "25565",
    status: serverStatus.value,
    discord: discord.value,
    rating:0,
    votes:0,
    verified:false,
    ratedBy:[]
  });

  save(); render();
}

// ===== RATE =====
function rate(i,v){
  if(servers[i].ratedBy.includes(user)) return alert("Already rated");
  servers[i].ratedBy.push(user);
  servers[i].rating = v;
  servers[i].votes++;
  save(); render();
}

// ===== FILTER =====
function toggleOnline(){
  showOnlineOnly = !showOnlineOnly;
  render();
}

// ===== ADMIN =====
function verifyServer(i){
  if(localStorage.getItem("isAdmin")!=="true") return;
  servers[i].verified = !servers[i].verified;
  save(); render();
}

function adminDelete(i){
  if(localStorage.getItem("isAdmin")!=="true") return;
  servers.splice(i,1);
  save(); render();
}

// ===== RENDER =====
function render(){
  servers.sort((a,b)=>b.rating-a.rating);
  serversBox = document.getElementById("servers");
  serversBox.innerHTML="";

  servers
  .filter(s=>!showOnlineOnly||s.status==="online")
  .forEach((s,i)=>{
    let stars="";
    for(let x=1;x<=5;x++){
      stars+=`<span class="star ${x<=s.rating?'active':''}" onclick="rate(${i},${x})">â˜…</span>`;
    }

    serversBox.innerHTML+=`
    <div class="card">
      <span class="status ${s.status}">${s.status}</span>
      ${s.verified?'<span class="badge">âœ” Verified</span>':''}
      <h3>${s.name}</h3>

      <div class="ip-box">
        <span>${s.ip}:${s.port}</span>
        <button class="copy" onclick="navigator.clipboard.writeText('${s.ip}:${s.port}')">COPY</button>
      </div>

      ${s.discord?`<a href="${s.discord}" target="_blank">ðŸ’¬ Discord</a>`:''}
      <div>${stars}</div>

      ${localStorage.getItem("isAdmin")==="true"?`
        <button onclick="verifyServer(${i})">Verify</button>
        <button style="background:#aa3333" onclick="adminDelete(${i})">Delete</button>
      `:""}
    </div>`;
  });
}
</script>

</body>
</html>